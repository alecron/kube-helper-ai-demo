#!/usr/bin/env bash

# Restart demo environment for MCP architecture
# Recreates playground namespace and restarts pods

echo "ðŸ”„ Restarting workshop demo environment..."

# Delete and recreate playground namespace
kubectl delete namespace playground --grace-period=10 || true
kubectl create namespace playground

# Restart Open WebUI pods
echo "ðŸ”„ Restarting Open WebUI..."
kubectl delete pod -n open-webui -l app.kubernetes.io/name=open-webui

# Restart MCPO pods
echo "ðŸ”„ Restarting MCPO..."
kubectl delete pod -n mcpo -l app=mcpo

# Reapply RBAC (in case it needs refreshing)
echo "ðŸ”„ Refreshing RBAC..."
kubectl apply -f k8s/mcpo-rbac.yaml

echo "âœ… Demo environment restarted!"
echo ""
echo "Check status:"
echo "  kubectl get pods -n open-webui"
echo "  kubectl get pods -n mcpo"
echo "  kubectl get pods -n playground"
